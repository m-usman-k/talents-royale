<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}My Website{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <!-- NAVBAR -->
    <nav>
        <div class="nav-logo">
            <a href="/">
                <img src="{% static 'images/tr-blue-crown.png' %}" alt="Talents Royale Blue Crown">
            </a>
        </div>

        <!-- Desktop links (hidden on small screens) -->
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/arenas">Arenas</a>
            <a href="/contestants">Contestants</a>
            <a href="/how-it-works">How It Works</a>
            <a href="/finale-royale">Finale Royale</a>
        </div>

        <!-- Desktop profile (visible on desktop) -->
        <div class="nav-profile">
            {% if user.is_authenticated %}
                <div style="display: flex; align-items: center; gap: 15px; margin-right: 15px;">
                    <span style="color: #FFA200; font-weight: 600; font-size: 18px;">{{ user.tokens }} ðŸª™</span>
                    <a href="/profile">
                        <img src="{% static 'images/tr-profile-icon.png' %}" alt="Profile">
                    </a>
                </div>
            {% else %}
                <a href="/login">
                    <img src="{% static 'images/tr-profile-icon.png' %}" alt="Login">
                </a>
            {% endif %}
        </div>

        <!-- Hamburger (mobile) -->
        <div id="hamburger" class="hamburger" role="button" aria-label="Menu" aria-expanded="false" aria-controls="mobileMenu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>

        <!-- Mobile menu (inside nav for correct absolute positioning) -->
        <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
            {% if user.is_authenticated %}
                <div class="mobile-profile">
                    <a href="/profile">
                        <img src="{% static 'images/tr-profile-icon.png' %}" alt="Profile">
                    </a>
                    <div class="mobile-profile-text">
                        <a href="/profile" class="mobile-profile-link">My Account</a>
                        <div class="mobile-username">@{{ user.username }} â€¢ {{ user.tokens }} ðŸª™</div>
                    </div>
                </div>
            {% else %}
                <div class="mobile-profile">
                    <a href="/login">
                        <img src="{% static 'images/tr-profile-icon.png' %}" alt="Login">
                    </a>
                    <div class="mobile-profile-text">
                        <a href="/login" class="mobile-profile-link">Login</a>
                        <div class="mobile-username">Not logged in</div>
                    </div>
                </div>
            {% endif %}

            <a href="/">Home</a>
            <a href="/arenas">Arenas</a>
            <a href="/contestants">Contestants</a>
            <a href="/how-it-works">How It Works</a>
            <a href="/finale-royale">Finale Royale</a>
            
            {% if user.is_authenticated %}
                <a href="/logout">Logout</a>
            {% endif %}
        </div>
    </nav>

    <!-- MAIN -->
    <!-- NOTE: no padding/margin here â€” left pristine as you asked -->
    <main class="container">
        <!-- Messages -->
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}" data-message-id="{{ forloop.counter }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
            <script>
                (function() {
                    const alerts = document.querySelectorAll('.alert');
                    alerts.forEach(function(alert, index) {
                        // Fade out after 5 seconds
                        setTimeout(function() {
                            alert.classList.add('fade-out');
                            // Remove from DOM after fade animation
                            setTimeout(function() {
                                if (alert.parentNode) {
                                    alert.remove();
                                }
                            }, 500);
                        }, 5000 + (index * 200)); // Stagger by 200ms for multiple messages
                    });
                })();
            </script>
        {% endif %}
        
        {% block content %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="footer-copyright">
            <p>
                Talents Royaleâ„¢ is a trademarked competition platform under U.S. copyright &amp; trademark law.
                Infringement may trigger DMCA take downs, cease and desist notices, and fines up to $150,000.
            </p>
        </div>

        <div class="footer-links" aria-label="social links">
            <a href="#"><img src="{% static 'images/tr-yt-icon.png' %}" alt="YouTube"></a>
            <a href="#"><img src="{% static 'images/tr-tr-icon.png' %}" alt="Talents Royale"></a>
            <a href="#"><img src="{% static 'images/tr-tw-icon.png' %}" alt="Twitter"></a>
            <a href="#"><img src="{% static 'images/tr-dc-icon.png' %}" alt="Discord"></a>
            <a href="#"><img src="{% static 'images/tr-fb-icon.png' %}" alt="Facebook"></a>
            <a href="#"><img src="{% static 'images/tr-ig-icon.png' %}" alt="Instagram"></a>
        </div>

        <div class="footer-trademark">
            Copyright &copy; 2025 Talents Royaleâ„¢
        </div>
    </footer>

<script>
/* Mobile hamburger/menu logic (keeps same IDs as in template) */
(function () {
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');

    function closeMenu() {
        hamburger.classList.remove('open');
        mobileMenu.classList.remove('open');
        hamburger.setAttribute('aria-expanded', 'false');
        mobileMenu.setAttribute('aria-hidden', 'true');
    }
    function openMenu() {
        hamburger.classList.add('open');
        mobileMenu.classList.add('open');
        hamburger.setAttribute('aria-expanded', 'true');
        mobileMenu.setAttribute('aria-hidden', 'false');
    }

    hamburger.addEventListener('click', function (e) {
        const isOpen = hamburger.classList.contains('open');
        if (isOpen) closeMenu(); else openMenu();
    });

    // Close menu when clicking a link inside it (good UX)
    mobileMenu.addEventListener('click', function (e) {
        if (e.target.tagName === 'A' || e.target.closest('a')) {
            closeMenu();
        }
    });

    // Close mobile menu if window resized to desktop view
    window.addEventListener('resize', function () {
        if (window.innerWidth > 920) {
            closeMenu();
        }
    });

    // Optional: close menu when clicking outside of it
    document.addEventListener('click', function (e) {
        if (!mobileMenu.contains(e.target) && !hamburger.contains(e.target) && mobileMenu.classList.contains('open')) {
            closeMenu();
        }
    });
})();
</script>
</body>
</html>
